<div
  class="bg-gray-800 rounded-lg shadow-lg p-4 sm:p-6 text-gray-200 animate-fade-in border border-white border-opacity-20"
>
  <h2 class="text-2xl font-bold text-cyan-400 mb-6 border-b border-gray-700 pb-3">Match History</h2>

  @if (matchService.isLoading()) {
    <div class="text-center py-10 text-gray-400">Loading history...</div>
  } @else if (matchService.matchHistory().length === 0) {
    <div class="text-center py-10 text-gray-500">
      <p>No matches have been recorded yet.</p>
      <p>Go to the Match Maker to start a duel!</p>
    </div>
  } @else {
    <ul class="space-y-3 max-h-[70vh] overflow-y-auto pr-2">
      @for (match of matchService.matchHistory(); track match.id) {
        <li class="bg-gray-700/50 p-4 rounded-lg">
          <div class="grid grid-cols-3 items-center gap-4">
            <!-- Player 1 -->
            <div class="flex flex-col items-end text-right">
              <span class="font-bold text-lg text-white">{{ match.player1Name }} ({{ match.player1Jersey }})</span>
              <span class="text-sm font-mono" [class]="getEloChangeClass(match.eloChangeP1)">
                {{ match.eloChangeP1 >= 0 ? '+' : '' }}{{ match.eloChangeP1 }} Elo
              </span>
            </div>

            <!-- Result -->
            <div class="text-center">
              @if (match.winnerId === match.player1Id) {
                <span class="font-black text-xl text-cyan-400">WIN</span>
              } @else if (match.winnerId === match.player2Id) {
                <span class="font-black text-xl text-gray-400">LOSS</span>
              } @else {
                <span class="font-bold text-xl text-orange-400">DRAW</span>
              }
              <div class="text-xs text-gray-500 mt-1">
                {{ match.timestamp | date: 'short' }}
              </div>
            </div>

            <!-- Player 2 -->
            <div class="flex flex-col items-start">
              <span class="font-bold text-lg text-white">{{ match.player2Name }} ({{ match.player2Jersey }})</span>
              <span class="text-sm font-mono" [class]="getEloChangeClass(match.eloChangeP2)">
                {{ match.eloChangeP2 >= 0 ? '+' : '' }}{{ match.eloChangeP2 }} Elo
              </span>
            </div>
          </div>
        </li>
      }
    </ul>
  }
</div>
